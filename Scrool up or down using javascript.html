<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />

    <!-- Bootstrap CSS -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css"
      integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N"
      crossorigin="anonymous"
    />

    <title>Hello, world!</title>
  </head>
  <body>
    <div
      class="main"
      style="
        width: 100%;
        height: 2000px;
        background-color: antiquewhite; 
      "
    >
      <h1>Hello, world!</h1>
      <p id="scroll_type" style="position: fixed;"></p>
    </div>

    <script
      src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js"
      integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-Fy6S3B9q64WdZWQUiU+q4/2Lc9npb8tCaSX9FK7E8HnRr0Jz8D6OP9dO5Vg3Q9ct"
      crossorigin="anonymous"
    ></script>

    <script>
      let prevScroll = 0;
      let page = 0;

      window.addEventListener("scroll", (event) => {
        let currentScroll = this.scrollY;

        if (currentScroll > prevScroll) {
        
        } else if (currentScroll < prevScroll) {
          // Scrolling up
          console.log("Scrolling up");
          $('#scroll_type').text('Scrolling up');

        } else {
          // No vertical scroll change
          console.log("No vertical scroll change");
        }

        // Update the previous scroll position
        page = currentPage;
        prevScroll = currentScroll;
      });



    </script>


  </body>
</html>


<!-- <script>

$(document).ready(function() {

var nextPage = 2; // Start from page 2 since page 1 is already loaded
var loading = false;
let prevScroll = 0;

function loadMoreProducts() {
    if (!loading) {
        loading = true;
        var ids = {
            !!json_encode($ids) !!
        }; // Serialize the PHP array into JavaScript array
        var type = {
            !!json_encode($type) !!
        }; // Serialize the PHP variable into JavaScript string
        $.ajax({
            url: '{{ route('
            load - more - products ') }}',
            method: 'GET',
            data: {
                page: nextPage,
                ids: ids,
                type: type
            },
            success: function(response) {
                console.log(response);
                $('#product-list').append(response); // Append new products
                nextPage++;
                loading = false;
            },
            error: function(xhr, status, error) {
                console.error(error);
                loading = false;
            }
        });
    }
}

window.addEventListener("scroll", () => {
    let currentScroll = window.scrollY;

    if (currentScroll > prevScroll) {
        // Calculate current page based on scroll position
        let currentPage = Math.round(currentScroll / 400);

        // Check if we have scrolled enough to load a new page
        if (currentPage > nextPage - 4) {
            console.log(`Loading page: ${nextPage}`);
            $('#scroll_type').text(currentPage);
            loadMoreProducts();
        }
    } else if (currentScroll < prevScroll) {
        // Scrolling up
        console.log("Scrolling up");
        $('#scroll_type').text('Scrolling up');
    } else {
        // No vertical scroll change
        console.log("No vertical scroll change");
    }

    // Update the previous scroll position
    prevScroll = currentScroll;
});


});
</script> -->
